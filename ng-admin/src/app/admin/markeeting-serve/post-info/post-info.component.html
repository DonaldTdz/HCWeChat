<pro-header></pro-header>
<nz-card [nzBordered]="false">
    <form nz-form (ngSubmit)="refreshData(false,true)" [nzLayout]="'inline'">
        <div nz-row [nzGutter]="24">
            <div nz-col [nzSpan]="6" class="mb-md">
                <div nz-form-item class="d-flex">
                    <div nz-form-label>
                        <label>区&nbsp;&nbsp;&nbsp;/&nbsp;&nbsp;&nbsp;县</label>
                    </div>
                    <div nz-form-control class="flex-1">
                        <nz-select [nzPlaceHolder]="'请选择区/县'" name="areaSe" [(ngModel)]="search.areaSe" [nzShowSearch]="true" nzSize="large">
                            <nz-option *ngFor="let i of areas" [nzLabel]="i.text" [nzValue]="i.value">
                            </nz-option>
                        </nz-select>
                    </div>
                </div>
            </div>
            <div nz-col [nzSpan]="6" class="mb-md">
                <div nz-form-item class="d-flex">
                    <div nz-form-label>
                        <label>订单号</label>
                    </div>
                    <div nz-form-control class="flex-1">
                        <nz-input [(ngModel)]="search.formCode" name="formCode" [nzSize]="'large'" [nzPlaceHolder]="'请输入订单号'" nzId="formCode"></nz-input>
                    </div>
                </div>
            </div>
            <div nz-col [nzSpan]="6" class="mb-md">
                <div nz-form-item class="d-flex">
                    <div nz-form-label>
                        <label>开始时间</label>
                    </div>
                    <div nz-form-control class="flex-1">
                        <nz-datepicker name="startTime" style="width:100%;" [nzSize]="'large'" nzId="startTime" [(ngModel)]="search.startTime" nzPlaceHolder="请选择开始时间"></nz-datepicker>
                    </div>
                </div>
            </div>

            <div nz-col [nzSpan]="6" class="mb-md">
                <div nz-form-item class="d-flex">
                    <div nz-form-label>
                        <label>结束时间</label>
                    </div>
                    <div nz-form-control class="flex-1">
                        <nz-datepicker name="endTime" style="width:100%;" nzId="endTime" [(ngModel)]="search.endTime" nzPlaceHolder="请选择结束时间"></nz-datepicker>
                    </div>
                </div>
            </div>

            <div nz-col [nzSpan]="6" class="mb-md">
                <div nz-form-item class="d-flex">
                    <div nz-form-label>
                        <label>商品规格</label>
                    </div>
                    <div nz-form-control class="flex-1">
                        <nz-input [(ngModel)]="search.productSpecification" name="productSpecification" [nzSize]="'large'" [nzPlaceHolder]="'请输入商品规格'"
                            nzId="specification"></nz-input>
                    </div>
                </div>
            </div>
            <!-- </div> -->

            <!-- <div nz-row [nzGutter]="24"> -->
            <div nz-col [nzSpan]="6" class="mb-md">
                <div nz-form-item class="d-flex">
                    <div nz-form-label>
                        <label>用户名</label>
                    </div>
                    <div nz-form-control class="flex-1">
                        <nz-input [(ngModel)]="search.name" name="name" [nzSize]="'large'" [nzPlaceHolder]="'请输入用户名'" nzId="name"></nz-input>
                    </div>
                </div>
            </div>

            <div nz-col [nzSpan]="6" class="mb-md">
                <div nz-form-item class="d-flex">
                    <div nz-form-label>
                        <label>用户类型</label>
                    </div>
                    <div nz-form-control class="flex-1">
                        <nz-select [nzPlaceHolder]="'请选择用户类型'" name="userType" [(ngModel)]="search.userType" [nzShowSearch]="true" nzSize="large">
                            <nz-option *ngFor="let i of userTypeS" [nzLabel]="i.text" [nzValue]="i.value">
                            </nz-option>
                        </nz-select>
                    </div>
                </div>
            </div>

            <div nz-col [nzSpan]="6" class="mb-md">
                <div nz-form-item class="d-flex">
                    <div nz-form-label>
                        <label>联系方式</label>
                    </div>
                    <div nz-form-control class="flex-1">
                        <nz-input [(ngModel)]="search.phone" name="phone" [nzSize]="'large'" [nzPlaceHolder]="'请输入联系方式'" nzId="phone"></nz-input>
                    </div>
                </div>
            </div>
            <div nz-col [nzSpan]="6" class="mb-md">
                <div nz-form-item class="d-flex">
                    <div nz-form-label>
                        <label>是否邮寄</label>
                    </div>
                    <div nz-form-control class="flex-1">
                        <nz-select [nzPlaceHolder]="'请选择是否邮寄'" name="isSend" [(ngModel)]="search.isSend" [nzShowSearch]="true" nzSize="large">
                            <nz-option *ngFor="let i of isSends" [nzLabel]="i.text" [nzValue]="i.value">
                            </nz-option>
                        </nz-select>
                    </div>
                </div>
            </div>
            <div nz-col [nzSpan]="18" class="mb-md" [class.text-right]="'true'">
                <button nz-button type="submit" [nzType]="'primary'" [nzLoading]="loading" [nzSize]="'large'">查询</button>
                <button nz-button type="reset" (click)="refreshData(true)" [nzSize]="'large'" class="mx-sm">重置</button>
                <a style="display: none;" id="aExcelUrl" href="#">
                    <button type="button" id="btnHref">测试隐藏下载</button>
                </a>
                <button nz-button type="button" (click)="markIsSend()" [nzType]="'primary'" [nzSize]="'large'" class="mx-sm">标记为已邮寄</button>
                <button nz-button type="button" (click)="exportExcel()" [nzType]="'primary'" [nzSize]="'large'" [nzLoading]="exportLoading" class="mx-sm">导出Excel</button>
            </div>
        </div>
    </form>
    <!-- (nzCurrentPageDataChange)="dataChanges($event)" -->
    <nz-table #nzTable [nzAjaxData]="postInfos" [nzTotal]="query.total" [(nzPageIndex)]="query.pageIndex" [(nzPageSize)]="query.pageSize"
        [nzLoading]="loading" [nzShowSizeChanger]="true" (nzPageIndexChange)="refreshData()" [nzShowTotal]="'true'"
        (nzPageSizeChange)="refreshData()">
        <thead nz-thead>
            <tr>
                <th nz-th [nzCheckbox]="true">
                    <label nz-checkbox [(ngModel)]="allChecked" [nzIndeterminate]="indeterminate" (ngModelChange)="checkAll($event)"></label>
                </th>
                <th style="display: none;" nz-th>
                    <span>Id</span>
                </th>
                <th nz-th>
                    <span>区/县</span>
                </th>
                <th nz-th>
                    <span>订单号</span>
                </th>
                <th nz-th>
                    <span>申请时间</span>
                </th>
                <th nz-th>
                    <span>商品规格</span>
                </th>
                <th nz-th>
                    <span>数量</span>
                </th>
                <th nz-th>
                    <span>用户类型</span>
                </th>
                <th nz-th>
                    <span>用户名</span>
                </th>
                <th nz-th>
                    <span>联系方式</span>
                </th>
                <th nz-th>
                    <span>邮寄地址</span>
                </th>
                <th nz-th>
                    <span>是否已邮寄</span>
                </th>
                <th nz-th>
                    <span>标记时间</span>
                </th>
            </tr>
        </thead>
        <tbody nz-tbody>
            <tr nz-tbody-tr *ngFor="let postinfo of nzTable.data">
                <td nz-td [nzCheckbox]="true">
                    <label nz-checkbox *ngIf="!postinfo.disabled" [(ngModel)]="postinfo.checked" (ngModelChange)="refreshCheckStatus($event)"></label>
                    <!-- [nzDisabled]="postinfo.disabled"  *ngIf="!postinfo.disabled" -->
                </td>
                <td style="display: none;" nz-td>{{postinfo.id}}</td>
                <td nz-td>{{postinfo.area}}</td>
                <td nz-td>
                    <a (click)="goDetail(postinfo)">{{postinfo.formCode}}</a>
                </td>
                <td nz-td>{{postinfo.applyTime | _date}}</td>
                <td nz-td>{{postinfo.goodsSpecification }}</td>
                <td nz-td>{{postinfo.num}}</td>
                <td nz-td>{{postinfo.typeName}}</td>
                <td nz-td>{{postinfo.userName}}</td>
                <td nz-td>{{postinfo.phone}}</td>
                <td nz-td>{{postinfo.address}}</td>
                <td nz-td>{{postinfo.isSendName}}</td>
                <td nz-td>{{postinfo.sendTime| _date}}</td>
            </tr>
        </tbody>
    </nz-table>
</nz-card>